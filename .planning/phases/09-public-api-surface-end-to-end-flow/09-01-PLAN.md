---
phase: 09-public-api-surface-end-to-end-flow
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .gitignore
  - go.mod
  - main.go
  - schema/schema.go
  - schema/definition.go
  - schema/field.go
  - schema/field_type.go
  - schema/hooks.go
  - schema/modifier.go
  - schema/option.go
  - schema/permission.go
  - schema/relationship.go
  - schema/schema_test.go
autonomous: true
requirements: []

must_haves:
  truths:
    - "go.mod declares module github.com/alternayte/forge"
    - "Every .go and .tmpl file references github.com/alternayte/forge (not forge-framework)"
    - "schema/ exists at repo root and internal/schema/ is deleted"
    - "go build ./... compiles successfully after rename and move"
  artifacts:
    - path: "go.mod"
      provides: "Module identity"
      contains: "module github.com/alternayte/forge"
    - path: "schema/schema.go"
      provides: "Public schema package"
      contains: "package schema"
  key_links:
    - from: "internal/parser/"
      to: "schema/"
      via: "import github.com/alternayte/forge/schema"
      pattern: "alternayte/forge/schema"
    - from: "go.mod"
      to: "all .go files"
      via: "module path consistency"
      pattern: "github.com/alternayte/forge"
---

<objective>
Rename the Go module from github.com/forge-framework/forge to github.com/alternayte/forge, and move internal/schema/ to schema/ at the repo root.

Purpose: This is the foundational change for Phase 9 — all subsequent plans depend on the new module path being in place. The module rename and schema move must happen atomically (single commit) because Go requires all import paths to be self-consistent.

Output: go.mod with new module path, all 60+ .go and .tmpl files updated, schema/ at repo root with internal/schema/ deleted, `go build ./...` passing.
</objective>

<execution_context>
@/Users/nathananderson-tennant/.claude/get-shit-done/workflows/execute-plan.md
@/Users/nathananderson-tennant/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-public-api-surface-end-to-end-flow/09-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rename module path and move schema package</name>
  <files>
    go.mod
    main.go
    internal/**/*.go
    internal/generator/templates/*.tmpl
    internal/scaffold/templates/*.tmpl
    schema/*.go
  </files>
  <action>
Execute a single atomic operation to rename the module and move the schema package:

0. **Remove the compiled `forge` binary at repo root and add .gitignore entry** — The repo root contains an 18 MB compiled `forge` binary (Mach-O arm64 executable). This MUST be removed before Plan 09-02 creates `forge/` as a package directory, because git cannot have both a file and a directory at the same path.
   - `rm forge` (delete the compiled binary)
   - Create `.gitignore` at repo root (if it doesn't exist) and add the line `forge` to exclude the binary from version control. Also add `!/forge/` on the next line so that the `forge/` package directory IS tracked by git.
   - `git add .gitignore && git rm --cached forge 2>/dev/null || true` (remove from git index if tracked)

1. **Edit go.mod** — change `module github.com/forge-framework/forge` to `module github.com/alternayte/forge`. Do NOT change any dependency lines.

2. **Global find-replace across ALL .go and .tmpl files** — replace every occurrence of `github.com/forge-framework/forge` with `github.com/alternayte/forge`. This includes:
   - ~61 .go files in internal/, main.go, etc.
   - ~30 .tmpl files in internal/generator/templates/ and internal/scaffold/templates/
   - Use: `find . -name "*.go" -o -name "*.tmpl" | grep -v vendor | xargs sed -i '' 's|github.com/forge-framework/forge|github.com/alternayte/forge|g'`

3. **Move schema package** — `git mv internal/schema/ schema/` to move the package from internal to root level. This preserves git history. The package name remains `schema` (no change to `package schema` declarations). All callers already import via the module path, so the find-replace in step 2 already changed `internal/schema` to just `schema` — WAIT, that's wrong. The import path `github.com/alternayte/forge/internal/schema` would still reference internal. After the `git mv`, the correct import path becomes `github.com/alternayte/forge/schema`. So AFTER the move, do a second find-replace:
   - Replace `github.com/alternayte/forge/internal/schema` with `github.com/alternayte/forge/schema` across all .go and .tmpl files.

4. **Delete internal/schema/ if git mv leaves anything** — verify `internal/schema/` no longer exists.

5. **Run `go build ./...`** to verify everything compiles. Fix any straggler import issues.

Important: The find-replace in step 2 is a superset operation — it catches go.mod references, import statements, comments, and template strings. The schema-specific replace in step 3 is a targeted follow-up for the directory move.
  </action>
  <verify>
    - `file forge 2>/dev/null` returns nothing (compiled binary removed)
    - `grep "^forge$" .gitignore` confirms binary is gitignored
    - `grep "!/forge/" .gitignore` confirms forge/ directory is NOT ignored
    - `head -1 go.mod` shows `module github.com/alternayte/forge`
    - `grep -r "forge-framework" --include="*.go" --include="*.tmpl" .` returns no results
    - `ls schema/schema.go` exists
    - `ls internal/schema/ 2>/dev/null` returns nothing (deleted)
    - `go build ./...` compiles without errors
  </verify>
  <done>Compiled forge binary removed and gitignored. Module path is github.com/alternayte/forge everywhere. schema/ is a root-level public package. All code compiles.</done>
</task>

<task type="auto">
  <name>Task 2: Verify import consistency and fix any test files</name>
  <files>
    internal/parser/parser_test.go
    internal/parser/parser_integration_test.go
    internal/generator/*_test.go
    schema/schema_test.go
  </files>
  <action>
After the rename and move, verify and fix all test files:

1. **Check all test files compile** — `go vet ./...` to catch any import issues in test files that may not be caught by `go build ./...` alone.

2. **Fix schema_test.go** — the test file moved with the package to `schema/schema_test.go`. Verify its package declaration is `package schema` (or `package schema_test`) and that its imports reference the new paths.

3. **Fix parser tests** — `internal/parser/` tests likely reference `internal/schema` types. Verify they now import `github.com/alternayte/forge/schema`.

4. **Run `go vet ./...`** to ensure all packages pass vet checks.

5. **Verify no stale references** — `grep -r "internal/schema" --include="*.go" .` should return zero results (all should reference `schema` at root).
  </action>
  <verify>
    - `go vet ./...` passes
    - `grep -r "internal/schema" --include="*.go" .` returns no results
    - `grep -r "forge-framework" . --include="*.go" --include="*.tmpl" --include="go.mod"` returns no results
  </verify>
  <done>All test files compile and pass vet. Zero references to old module path or internal/schema remain.</done>
</task>

</tasks>

<verification>
1. `head -1 go.mod` shows `module github.com/alternayte/forge`
2. `grep -rn "forge-framework" --include="*.go" --include="*.tmpl" --include="go.mod" .` returns empty
3. `grep -rn "internal/schema" --include="*.go" --include="*.tmpl" .` returns empty
4. `ls schema/schema.go schema/definition.go schema/field.go` all exist
5. `ls internal/schema/ 2>/dev/null` returns nothing
6. `go build ./...` succeeds
7. `go vet ./...` succeeds
</verification>

<success_criteria>
- Module path is github.com/alternayte/forge in go.mod and all source files
- schema/ package lives at repo root (not internal/)
- All .go and .tmpl files reference new paths
- Code compiles and passes vet
</success_criteria>

<output>
After completion, create `.planning/phases/09-public-api-surface-end-to-end-flow/09-01-SUMMARY.md`
</output>
