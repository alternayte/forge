---
phase: 09-public-api-surface-end-to-end-flow
plan: 04
subsystem: scaffold
tags: [scaffold, templates, forge-init, go-modules]

# Dependency graph
requires:
  - phase: 09-01
    provides: forge/ public package structure including schema/ package at repo root
provides:
  - scaffold templates producing Post resource with Title/Body/Status fields
  - schema.go.tmpl importing github.com/alternayte/forge/schema (framework package)
  - go.mod.tmpl with require github.com/alternayte/forge v0.0.0 dependency
  - clean main.go.tmpl placeholder directing users to forge generate
affects: [09-05, end-to-end-flow]

# Tech tracking
tech-stack:
  added: []
  patterns:
    - "Scaffold schema imports framework's public schema package (not user module path)"
    - "Scaffold go.mod includes forge dependency so user projects can compile after forge generate"

key-files:
  created: []
  modified:
    - internal/scaffold/templates/schema.go.tmpl
    - internal/scaffold/templates/go.mod.tmpl
    - internal/scaffold/templates/main.go.tmpl
    - internal/cli/init.go

key-decisions:
  - "schema.go.tmpl hardcodes github.com/alternayte/forge/schema import — schema package lives in framework, not user module"
  - "go.mod.tmpl uses v0.0.0 placeholder version — users add replace directive or run go mod tidy with real version"
  - "main.go.tmpl is a clean placeholder (no old forge-framework wiring examples) — real server wiring generated by forge generate in Plan 05"

patterns-established:
  - "Example resource is Post (not Product) — consistent across all scaffold templates and init command"

requirements-completed: []

# Metrics
duration: 1min
completed: 2026-02-19
---

# Phase 9 Plan 04: Update Scaffold Templates Summary

**Scaffold templates updated to produce Post resource with github.com/alternayte/forge/schema import and forge dependency in go.mod, enabling compilable projects after forge generate runs.**

## Performance

- **Duration:** 1 min
- **Started:** 2026-02-19T21:15:22Z
- **Completed:** 2026-02-19T21:16:16Z
- **Tasks:** 2
- **Files modified:** 4

## Accomplishments

- schema.go.tmpl now imports `github.com/alternayte/forge/schema` (the framework's public package) instead of `{{.Module}}/gen/schema` (a user-generated path that doesn't exist before forge generate runs)
- schema.go.tmpl now defines a Post resource with Title, Body, Status fields replacing the Product resource with Name, Description, Active fields
- go.mod.tmpl now includes `require github.com/alternayte/forge v0.0.0` so scaffolded projects declare the forge dependency
- main.go.tmpl cleaned up to a simple placeholder directing users to forge generate (removed stale commented-out forge-framework wiring)
- internal/cli/init.go updated: ExampleResource "post", ExampleResourceTitle "Post", resources/post/schema.go in file listing

## Task Commits

Each task was committed atomically:

1. **Task 1: Update scaffold templates for new imports and Post resource** - `32fcf8c` (feat)
2. **Task 2: Update init command to use Post example resource** - `063e059` (feat)

**Plan metadata:** (docs commit follows)

## Files Created/Modified

- `internal/scaffold/templates/schema.go.tmpl` - Post resource definition importing forge's schema package
- `internal/scaffold/templates/go.mod.tmpl` - Added require github.com/alternayte/forge v0.0.0
- `internal/scaffold/templates/main.go.tmpl` - Clean placeholder with forge generate instructions
- `internal/cli/init.go` - ExampleResource/ExampleResourceTitle changed to post/Post; file path updated

## Decisions Made

- schema.go.tmpl hardcodes `github.com/alternayte/forge/schema` — the schema package is the framework's public API, it does not live in the user's module, so `{{.Module}}/gen/schema` was incorrect (gen/schema doesn't exist before code generation)
- go.mod.tmpl uses `v0.0.0` as placeholder version — real projects need a replace directive for local development or a pinned release version; scaffold cannot know this at init time
- main.go.tmpl removed old commented forge-framework wiring examples — those references were to a non-existent path; Plan 05 generates the real main.go server wiring

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered

None.

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness

- scaffold templates now produce correct output for the Post example resource
- forge init myapp will create resources/post/schema.go with proper forge/schema import
- scaffolded go.mod declares forge dependency, ready for Plan 05 to generate main.go server wiring
- go build ./... confirmed passing

---
*Phase: 09-public-api-surface-end-to-end-flow*
*Completed: 2026-02-19*
