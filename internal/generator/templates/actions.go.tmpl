// Code generated by forge generate. DO NOT EDIT.

package actions

import (
	"context"

	"github.com/google/uuid"
	"{{.ProjectModule}}/gen/errors"
	"{{.ProjectModule}}/gen/models"
	"{{.ProjectModule}}/gen/queries"
	"{{.ProjectModule}}/gen/validation"
)

// {{.Name}}Actions defines the business logic interface for {{.Name}} operations.
// Both HTML and API handlers call this interface to prevent logic duplication.
type {{.Name}}Actions interface {
	// List retrieves {{plural .Name | lower}} with filtering, sorting, and pagination.
	List(ctx context.Context, filter models.{{.Name}}Filter, sort models.{{.Name}}Sort, page int, pageSize int) ([]models.{{.Name}}, int64, error)

	// Get retrieves a single {{.Name}} by ID.
	Get(ctx context.Context, id uuid.UUID) (*models.{{.Name}}, error)

	// Create creates a new {{.Name}} after validation.
	Create(ctx context.Context, input models.{{.Name}}Create) (*models.{{.Name}}, error)

	// Update updates an existing {{.Name}} after validation.
	Update(ctx context.Context, id uuid.UUID, input models.{{.Name}}Update) (*models.{{.Name}}, error)

	// Delete removes a {{.Name}} by ID.
	Delete(ctx context.Context, id uuid.UUID) error
}

// Default{{.Name}}Actions is the default implementation of {{.Name}}Actions.
// Developers can embed this struct and override specific methods for custom behavior.
type Default{{.Name}}Actions struct {
	DB DB
}

// List retrieves {{plural .Name | lower}} with filtering, sorting, and pagination.
func (a *Default{{.Name}}Actions) List(ctx context.Context, filter models.{{.Name}}Filter, sort models.{{.Name}}Sort, page int, pageSize int) ([]models.{{.Name}}, int64, error) {
	// Build query mods from filter
	filterMods := queries.{{.Name}}FilterMods(filter)

	// Build sort mod
	sortMod := queries.{{.Name}}SortMod(sort)

	// TODO: Execute Bob query with filterMods and sortMod
	// This will be implemented when Bob query execution layer is complete.
	// For now, return empty results to maintain compilable interface.
	_ = filterMods
	_ = sortMod

	return []models.{{.Name}}{}, 0, nil
}

// Get retrieves a single {{.Name}} by ID.
func (a *Default{{.Name}}Actions) Get(ctx context.Context, id uuid.UUID) (*models.{{.Name}}, error) {
	// TODO: Execute Bob query to fetch by ID
	// This will be implemented when Bob query execution layer is complete.
	// For now, return not found error to maintain compilable interface.
	_ = id

	return nil, errors.NotFound("{{.Name}}", id.String())
}

// Create creates a new {{.Name}} after validation.
func (a *Default{{.Name}}Actions) Create(ctx context.Context, input models.{{.Name}}Create) (*models.{{.Name}}, error) {
	// Validate input using generated validation
	valErrs := validation.Validate{{.Name}}Create(input)
	if valErrs.HasErrors() {
		return nil, errors.NewValidationError(valErrs)
	}

	// TODO: Execute Bob insert query
	// This will be implemented when Bob query execution layer is complete.
	// For now, return internal error to maintain compilable interface.

	return nil, errors.InternalError("Create not yet implemented")
}

// Update updates an existing {{.Name}} after validation.
func (a *Default{{.Name}}Actions) Update(ctx context.Context, id uuid.UUID, input models.{{.Name}}Update) (*models.{{.Name}}, error) {
	// Validate input using generated validation
	valErrs := validation.Validate{{.Name}}Update(input)
	if valErrs.HasErrors() {
		return nil, errors.NewValidationError(valErrs)
	}

	// TODO: Execute Bob update query
	// This will be implemented when Bob query execution layer is complete.
	// For now, return not found error to maintain compilable interface.
	_ = id

	return nil, errors.NotFound("{{.Name}}", id.String())
}

// Delete removes a {{.Name}} by ID.
func (a *Default{{.Name}}Actions) Delete(ctx context.Context, id uuid.UUID) error {
	// TODO: Execute Bob delete query
	// This will be implemented when Bob query execution layer is complete.
	// For now, return not found error to maintain compilable interface.
	_ = id

	return errors.NotFound("{{.Name}}", id.String())
}
